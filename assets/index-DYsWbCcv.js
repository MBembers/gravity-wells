(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function c(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=c(o);fetch(o.href,r)}})();function m(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]}function h(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function d(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function p(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}const l=document.querySelector("#sim-canvas");l.width=400;l.height=400;const s=l.getContext("2d");s.fillStyle="black";s.fillRect(0,0,l.width,l.height);const a=3,y=.07,L=2e3,g=4,M=6.674*10,O=.09,f=[],x=(t,e)=>{let c=[0,0,0];for(let n=0;n<f.length;n++){const o=f[n];let r=h(o.pos,t);const i=p(r);let u=d(r,1/Math.pow(i,3));u=d(u,M*o.m),u=h(u,d(e,O)),c=m(c,u)}return c},E=(t,e)=>m(t,d(e,y)),I=(t,e)=>m(t,d(e,y)),k=t=>{let e=f[0],c=p(h(t,f[0].pos));return f.forEach(n=>{const o=p(h(t,n.pos));o<c&&(e=n,c=o)}),e},b=(t,e=!1)=>{let c=[0,0,0],n=0;for(e&&(s.lineWidth=1,s.strokeStyle="black",s.beginPath(),s.moveTo(t[0],t[1]));;){const o=x(t,c);if(c=E(c,o),t=I(t,c),t[2]=0,n>L)break;e&&s.lineTo(t[0],t[1]),n++}return e&&s.stroke(),t},q={pos:[250,300,g],m:100,color:"#fa6670"},N={pos:[300,100,g],m:300,color:"#1fc7ff"},R={pos:[100,200,g],m:100,color:"#8bfa66"};f.push(q,N,R);let _=0,S=0,w=[],P;for(let t=0;t<l.width;t+=a){const e=t+a/2;for(let c=0;c<l.height;c+=a){const n=c+a/2,r=b([n,e,0]),i=k(r);p(h(r,i.pos))>15&&S++,s.fillStyle=i.color,s.fillRect(n-a/2,e-a/2,a,a),w.push(r),_++}}console.log("total count: ",_);console.log("error count: ",S);const D=()=>{f.forEach(t=>{s.beginPath(),s.arc(t.pos[0],t.pos[1],10,0,2*Math.PI),s.fillStyle=t.color,s.fill(),s.lineWidth=4,s.strokeStyle="black",s.stroke()})};D();s.fillStyle="white";w.forEach(t=>{s.fillRect(Math.floor(t[0]),Math.floor(t[1]),1,1)});P=s.getImageData(0,0,l.width,l.height);l.addEventListener("mousemove",t=>{const e=t.offsetX,c=t.offsetY;s.putImageData(P,0,0),b([e,c,0],!0)});
