(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function c(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=c(r);fetch(r.href,n)}})();function i(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]}function p(t,e){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}function l(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function y(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}function _(t,e,c,o){let r=[0,0,0];for(let n=0;n<c.length;n++){const f=c[n];let h=p(f.pos,t);const g=y(h);let a=l(h,1/Math.pow(g,3));a=l(a,o.G*f.m),a=p(a,l(e,o.b)),r=i(r,a)}return r}function N(t,e){let c=e[0],o=y(p(t,e[0].pos));return e.forEach(r=>{const n=y(p(t,r.pos));n<o&&(c=r,o=n)}),c}function L(t,e,c,o,r=!1){let n=[0,0,0],f=0;for(r&&(o.lineWidth=1,o.strokeStyle="black",o.beginPath(),o.moveTo(t[0],t[1]));[t,n]=R(t,n,e,c),t[2]=0,n[2]=0,!(f>c.max_steps);)r&&o.lineTo(t[0],t[1]),f++;return r&&o.stroke(),t}function R(t,e,c,o){const r=l(e,o.dt),n=l(_(t,e,c,o),o.dt);n[2]=0;const f=l(i(e,l(n,1/2)),o.dt),h=l(_(i(t,l(r,1/2)),i(e,l(n,1/2)),c,o),o.dt);h[2]=0;const g=l(i(e,l(h,1/2)),o.dt),a=l(_(i(t,l(f,1/2)),i(e,l(h,1/2)),c,o),o.dt);a[2]=0;const q=l(i(e,a),o.dt),S=l(_(i(t,g),i(e,a),c,o),o.dt);S[2]=0;const w=l(i(r,i(l(f,2),i(l(g,2),q))),1/6),P=l(i(n,i(l(h,2),i(l(a,2),S))),1/6);return w[2]=0,P[2]=0,[i(t,w),i(e,P)]}const d=document.querySelector("#sim-canvas");d.width=400;d.height=400;const s=d.getContext("2d");s.fillStyle="black";s.fillRect(0,0,d.width,d.height);const u=5,x=.3,D=500,b=5,G=6.674*10,T=.2,W=.1,m=[],M={dt:x,G,b:T,epsilon:W,max_steps:D,h:u},j={pos:[250,300,b],m:100,color:"#fa6670"},z={pos:[300,100,b],m:300,color:"#1fc7ff"},A={pos:[100,200,b],m:100,color:"#8bfa66"};m.push(j,z,A);let O=0,E=0,k=[],I;for(let t=0;t<d.width;t+=u){const e=t+u/2;for(let c=0;c<d.height;c+=u){const o=c+u/2,n=L([o,e,0],m,M,s),f=N(n,m);y(p(n,f.pos))>15&&E++,s.fillStyle=f.color,s.fillRect(o-u/2,e-u/2,u,u),k.push(n),O++}}console.log("total count: ",O);console.log("error count: ",E);const C=()=>{m.forEach(t=>{s.beginPath(),s.arc(t.pos[0],t.pos[1],10,0,2*Math.PI),s.fillStyle=t.color,s.fill(),s.lineWidth=4,s.strokeStyle="black",s.stroke()})};C();s.fillStyle="white";k.forEach(t=>{s.fillRect(Math.floor(t[0]),Math.floor(t[1]),1,1)});I=s.getImageData(0,0,d.width,d.height);d.addEventListener("mousemove",t=>{const e=t.offsetX,c=t.offsetY;s.putImageData(I,0,0),L([e,c,0],m,M,s,!0)});
